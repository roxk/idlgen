<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
	<PropertyGroup>
		<Native-Platform Condition="'$(Platform)' == 'Win32'">x86</Native-Platform>
		<Native-Platform Condition="'$(Platform)' != 'Win32'">$(Platform)</Native-Platform>
		<IdlGenCppDisableUnknownAttributeWarning Condition="'$(IdlGenCppDisableUnknownAttributeWarning)' == ''">true</IdlGenCppDisableUnknownAttributeWarning>
		<IdlGenCppGenerateIDL Condition="'$(IdlGenCppGenerateIDL)' == ''">true</IdlGenCppGenerateIDL>
		<IdlGenCppExclude Condition="'$(IdlGenCppExclude)' == ''">App.h;pch.h</IdlGenCppExclude>
	</PropertyGroup>
	<PropertyGroup>
		<IdlGenCppIncludeDirs>$(GeneratedFilesDir);$(VC_IncludePath);$(WindowsSDK_IncludePath);$(ProjectDir);$(MSBuildThisFileDirectory)..\..\include;$(MSBuildThisFileDirectory)..\..\include\idlgen</IdlGenCppIncludeDirs>
	</PropertyGroup>
	<ItemGroup Condition="'$(IdlGenCppInclude)' == ''">
		<IdlGenCppInclude Include="@(ClInclude)" Exclude="$(IdlGenCppExclude)" />
	</ItemGroup>
	<ItemGroup Condition="'$(IdlGenCppInclude)' != ''">
		<IdlGenCppInclude Include="$(IdlGenCppInclude)" Exclude="$(IdlGenCppExclude)" />
	</ItemGroup>
	<ItemGroup>
		<IdlGenCppIncludeDirs Include="$(IdlGenCppIncludeDirs)"/>
		<IdlGenCppAdditionalDefines Include="$(IdlGenCppAdditionalDefines)"/>
	</ItemGroup>
	<ItemGroup>
		<IdlGenCppGetterTemplates Include="$(IdlGenCppGetterTemplate)"/>
		<IdlGenCppPropertyTemplates Include="$(IdlGenCppPropertyTemplate)"/>
	</ItemGroup>
	<ItemDefinitionGroup>
		<ClCompile Condition="'$(IdlGenCppDisableUnknownAttributeWarning)' == 'true'">
			<DisableSpecificWarnings>%(DisableSpecificWarnings);5030;</DisableSpecificWarnings>
		</ClCompile>
		<ClCompile>
			<AdditionalIncludeDirectories>%(AdditionalIncludeDirectories);$(MSBuildThisFileDirectory)..\..\include\idlgen</AdditionalIncludeDirectories>
		</ClCompile>
		<IdlGenCppInclude>
			<IdlOutput>%(RelativeDir)%(Filename).idl</IdlOutput>
		</IdlGenCppInclude>
	</ItemDefinitionGroup>
	<Target Name="IdlGenCppGeneratePCH" BeforeTargets="IdlGenCppStartGenerateIDL" Inputs="pch.h" Outputs="$(OutDir)idlgen\pch.h.gch" Condition="'$(IdlGenCppGenerateIDL)' == 'true'">
		<Message Text="Generating idlgen PCH..." Importance="high" />
		<Exec Command="$(MSBuildThisFileDirectory)..\..\bin\$(Platform)\idlgen.exe --gen-pch --pch=pch.h -pch-out-dir=&quot;$(OutDir)idlgen&quot; @(IdlGenCppAdditionalDefines->'--define=&quot;%(Identity)&quot;', ' ') @(IdlGenCppIncludeDirs->'--include=&quot;%(Identity)&quot;'->Replace('\','/'), ' ')" />
	</Target>
	<Target Name="IdlGenCppGenerateIDL" BeforeTargets="ClCompile" Inputs="@(IdlGenCppInclude)" Outputs="%(IdlOutput)" Condition="'$(IdlGenCppGenerateIDL)' == 'true'">
		<Message Text="%(IdlGenCppInclude.Identity)" Importance="high" />
		<Exec Command="$(MSBuildThisFileDirectory)..\..\bin\$(Platform)\idlgen.exe --gen --pch=pch.h -pch-out-dir=&quot;$(OutDir)idlgen&quot; %(IdlGenCppInclude.Identity) @(IdlGenCppAdditionalDefines->'--define=&quot;%(Identity)&quot;', ' ') @(IdlGenCppGetterTemplates->'--getter-template=&quot;%(Identity)&quot;', ' ') @(IdlGenCppPropertyTemplates->'--property-template=&quot;%(Identity)&quot;', ' ') @(IdlGenCppIncludeDirs->'--include=&quot;%(Identity)&quot;'->Replace('\','/'), ' ')" />
	</Target>
	<Target Name="IdlGenCppStartGenerateIDL" BeforeTargets="IdlGenCppGenerateIDL" Condition="'$(IdlGenCppGenerateIDL)' == 'true'">
		<Message Text="Running idlgen on C++ header" Importance="high" />
	</Target>
</Project>